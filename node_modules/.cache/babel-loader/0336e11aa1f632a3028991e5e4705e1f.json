{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/Anis/Sheba Offer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/macbookair/Desktop/Anis/Sheba Offer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useContext,useState}from\"react\";import{useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{toast}from\"react-toastify\";import Loader from\"../../components/Loader/Loader\";import useAuth from\"../../hooks/useAuth\";import Payment from\"../../Pages/Payment/Payment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Tnxld(){var _useAuth=useAuth(),user=_useAuth.user,userInfo=_useAuth.userInfo;var _useForm=useForm(),register=_useForm.register,reset=_useForm.reset,handleSubmit=_useForm.handleSubmit;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),depositInfo=_useState4[0],setDepositInfo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];useEffect(function(){//https://yellow-sparkly-station.glitch.me/\nfetch(\"https://yellow-sparkly-station.glitch.me/deposit\").then(function(res){return res.json();}).then(function(data){var latestData=data.sort(function(a,b){return new Date(b.date).getTime()-new Date(a.date).getTime();});setDepositInfo(latestData);});},[]);var onSubmit=function onSubmit(data){var result=depositInfo===null||depositInfo===void 0?void 0:depositInfo.filter(function(singleDeposit){return(singleDeposit===null||singleDeposit===void 0?void 0:singleDeposit.transactionID)===(data===null||data===void 0?void 0:data.transactionID);});if((result===null||result===void 0?void 0:result.length)>0){var _result$,_result$2;data.depositID=(_result$=result[0])===null||_result$===void 0?void 0:_result$._id;if(((_result$2=result[0])===null||_result$2===void 0?void 0:_result$2.status)===\"Accepted\"){toast.error(\"Already Inserted!\");}else{data.status=\"Accepted\";try{setLoading(true);axios.put(\"https://yellow-sparkly-station.glitch.me/deposit\",data).then(function(res){setLoading(false);if(res.status===200){toast.success(\"Successfully Update!\");reset();}});}catch(err){setLoading(false);toast.error(err);}}}else{toast.error(\"does not matched or not payment yet\");}};console.log(\"me\",message);return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-l text-center  rounded px-4 text-green-500 mx-44 py-4 \",children:message}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center btn-grad p-3 text-white w-48 justify-center my-4 rounded\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-l font-bold text-white \",children:\"Insert Deposit History\"})})}),/*#__PURE__*/_jsxs(\"form\",{className:\"w-full max-w-lg flex flex-col justify-center text-center  ml-auto mr-auto\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"label\",{className:\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 text-left ml-1 \",htmlFor:\"name\",children:\"Transaction ID\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white\"},register(\"transactionID\")),{},{required:true})),/*#__PURE__*/_jsx(\"input\",{className:\"py-2 rounded mt-4 service-btn text-white\",type:\"submit\"})]})]})});}","map":{"version":3,"sources":["/Users/macbookair/Desktop/Anis/Sheba Offer/src/DashBoard/Tnxld/Tnxld.js"],"names":["axios","React","useContext","useState","useEffect","useForm","toast","Loader","useAuth","Payment","Tnxld","user","userInfo","register","reset","handleSubmit","message","setMessage","depositInfo","setDepositInfo","loading","setLoading","fetch","then","res","json","data","latestData","sort","a","b","Date","date","getTime","onSubmit","result","filter","singleDeposit","transactionID","length","depositID","_id","status","error","put","success","err","console","log"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useContext, useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { toast } from \"react-toastify\";\nimport Loader from \"../../components/Loader/Loader\";\nimport useAuth from \"../../hooks/useAuth\";\n\nimport Payment from \"../../Pages/Payment/Payment\";\n\nexport default function Tnxld() {\n  const { user, userInfo } = useAuth();\n  const { register, reset, handleSubmit } = useForm();\n  const [message, setMessage] = useState(\"\");\n  const [depositInfo, setDepositInfo] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    //https://yellow-sparkly-station.glitch.me/\n    fetch(`https://yellow-sparkly-station.glitch.me/deposit`)\n      .then((res) => res.json())\n      .then((data) => {\n        const latestData = data.sort(\n          (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\n        );\n        setDepositInfo(latestData);\n      });\n  }, []);\n\n  const onSubmit = (data) => {\n    const result = depositInfo?.filter(\n      (singleDeposit) => singleDeposit?.transactionID === data?.transactionID\n    );\n    if (result?.length > 0) {\n      data.depositID = result[0]?._id;\n      if (result[0]?.status === \"Accepted\") {\n        toast.error(\"Already Inserted!\");\n      } else {\n        data.status = \"Accepted\";\n        try {\n          setLoading(true);\n          axios\n            .put(\"https://yellow-sparkly-station.glitch.me/deposit\", data)\n            .then((res) => {\n              setLoading(false);\n              if (res.status === 200) {\n                toast.success(\"Successfully Update!\");\n                reset();\n              }\n            });\n        } catch (err) {\n          setLoading(false);\n          toast.error(err);\n        }\n      }\n    } else {\n      toast.error(\"does not matched or not payment yet\");\n    }\n  };\n\n  console.log(\"me\", message);\n  return (\n    <div>\n      {loading ? (\n        <Loader />\n      ) : (\n        <div className=\"mt-8\">\n          <h3 className=\"text-l text-center  rounded px-4 text-green-500 mx-44 py-4 \">\n            {message}\n          </h3>\n\n          <div className=\"flex justify-center\">\n            <div className=\"text-center btn-grad p-3 text-white w-48 justify-center my-4 rounded\">\n              <h2 className=\"text-l font-bold text-white \">\n                Insert Deposit History\n              </h2>\n            </div>\n          </div>\n\n          <form\n            className=\"w-full max-w-lg flex flex-col justify-center text-center  ml-auto mr-auto\"\n            onSubmit={handleSubmit(onSubmit)}\n          >\n            <label\n              className=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 text-left ml-1 \"\n              htmlFor=\"name\"\n            >\n              Transaction ID\n            </label>\n            <input\n              className=\"appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white\"\n              {...register(\"transactionID\")}\n              required\n            />\n\n            <input\n              className=\"py-2 rounded mt-4 service-btn text-white\"\n              type=\"submit\"\n            />\n          </form>\n        </div>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}