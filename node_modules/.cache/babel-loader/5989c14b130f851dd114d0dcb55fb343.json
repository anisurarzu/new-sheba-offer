{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/Anis/Sheba Offer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/macbookair/Desktop/Anis/Sheba Offer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{Spin}from\"antd\";import\"./Schedule.css\";import{useState}from\"react\";import useAuth from\"../../../hooks/useAuth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Schedule=function Schedule(){var _useAuth=useAuth(),user=_useAuth.user;var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentSchedule=_useState2[0],setCurrentSchedule=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),scheduleList=_useState4[0],setScheduleList=_useState4[1];//   console.log(\"scheduleCurrent\", currentSchedule);\nvar email=user===null||user===void 0?void 0:user.email;useEffect(function(){fetch(\"https://yellow-sparkly-station.glitch.me/schedule\").then(function(res){return res.json();}).then(function(data){// console.log(\"event data\", data[0].email);\nvar schedule=data.filter(function(data){return(data===null||data===void 0?void 0:data.scholarEmail)===email;});setScheduleList(schedule);// console.log(event);\n});},[]);// searching method\nvar handleSearch=function handleSearch(event){var searchText=event.target.value;var matchedDetails=scheduleList.filter(function(details){return details.userName.toLowerCase().includes(searchText.toLowerCase());});setScheduleList(matchedDetails);};// send scheduleBooking date and  change schedule status\nvar _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var onSubmit=function onSubmit(data){data.bookedDates=currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.bookingDate;data.scholarId=currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.scholarId;data.scheduleId=currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule._id;console.log(\"bookedDates\",data);if((data===null||data===void 0?void 0:data.status)===\"Accept\"){fetch(\"https://yellow-sparkly-station.glitch.me/schedule/bookingInfo\",{method:\"PUT\",headers:{\"content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(res){// console.log(res);\n// alert(\"image uploaded done\");\n// reset();\nreset();// window.location.reload();\n}).catch(function(error){// console.log(error);\n});//   send status to database\nfetch(\"https://yellow-sparkly-station.glitch.me/schedule/bookingStatus\",{method:\"PUT\",headers:{\"content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(res){// console.log(res);\n// alert(\"image uploaded done\");\n// reset();\nreset();window.location.reload();}).catch(function(error){// console.log(error);\n});}else{fetch(\"https://yellow-sparkly-station.glitch.me/schedule/bookingStatus\",{method:\"PUT\",headers:{\"content-Type\":\"application/json\"},body:JSON.stringify(data)}).then(function(res){// console.log(res);\n// alert(\"image uploaded done\");\n// reset();\nreset();window.location.reload();}).catch(function(error){// console.log(error);\n});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"inline-block min-w-full  rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\" flex items-center justify-between pb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{class:\"text-gray-600 font-semibold\",children:\"Schedule Booking Details\"}),/*#__PURE__*/_jsx(\"span\",{class:\"text-xs\",children:\"All Schedule List\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"flex bg-gray-50 items-center p-2 rounded-md\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",class:\"h-5 w-5 text-gray-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{\"fill-rule\":\"evenodd\",d:\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\",\"clip-rule\":\"evenodd\"})}),/*#__PURE__*/_jsx(\"input\",{onChange:handleSearch,class:\"bg-gray-50 outline-none ml-1 block \",type:\"text\",name:\"\",id:\"\",placeholder:\"search...by user name\"})]})})]}),/*#__PURE__*/_jsxs(\"table\",{class:\"min-w-full leading-normal\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{class:\"pl-28 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"User Name\"}),/*#__PURE__*/_jsx(\"th\",{class:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"User Email\"}),/*#__PURE__*/_jsx(\"th\",{class:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Apply From\"}),/*#__PURE__*/_jsx(\"th\",{class:\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{class:\" py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{class:\" py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\",children:\"Details\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:scheduleList===null||scheduleList===void 0?void 0:scheduleList.map(function(schedule){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{class:\"px-5  border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{class:\" w-10 h-10\",children:/*#__PURE__*/_jsx(\"img\",{class:\"w-full h-full rounded-full\",src:(schedule===null||schedule===void 0?void 0:schedule.userImage)||\"https://i.ibb.co/PFkN0mF/user.png\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"ml-3\",children:/*#__PURE__*/_jsx(\"p\",{class:\"text-gray-900 whitespace-no-wrap pt-3 justify-center\",children:schedule===null||schedule===void 0?void 0:schedule.userName})})]})}),/*#__PURE__*/_jsx(\"td\",{class:\"pt-3 border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsx(\"p\",{class:\"text-gray-900 whitespace-no-wrap\",children:schedule===null||schedule===void 0?void 0:schedule.userEmail})}),/*#__PURE__*/_jsx(\"td\",{class:\"pt-3 border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsx(\"p\",{class:\"text-gray-900 whitespace-no-wrap\",children:schedule===null||schedule===void 0?void 0:schedule.city})}),/*#__PURE__*/_jsx(\"td\",{class:\"  border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsxs(\"span\",{class:\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\",children:[/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":true,class:\"absolute inset-0 bg-indigo-200 opacity-50 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{class:\"relative\",children:schedule===null||schedule===void 0?void 0:schedule.bookingDate})]})}),/*#__PURE__*/_jsx(\"td\",{class:\"  border-b border-gray-200 bg-white text-sm\",children:/*#__PURE__*/_jsxs(\"span\",{class:\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\",children:[/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":true,className:\"\".concat((schedule===null||schedule===void 0?void 0:schedule.status)===\"Accept\"?\"absolute inset-0 bg-green-200 opacity-50 rounded-full\":(schedule===null||schedule===void 0?void 0:schedule.status)===\"Reject\"?\"absolute inset-0 bg-red-200 opacity-50 rounded-full\":\"absolute inset-0 bg-yellow-200 opacity-50 rounded-full\")}),/*#__PURE__*/_jsx(\"span\",{class:\"relative\",children:schedule===null||schedule===void 0?void 0:schedule.status})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setCurrentSchedule(schedule);},type:\"button\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#exampleModal\",class:\"text-white font-bold py-1 px-3 ml-2 rounded text-xs bg-green-500 hover:bg-green-dark\",children:\"Details\"})})]});})})]})]}),/*#__PURE__*/_jsx(\"div\",{class:\"modal fade mt-12\",id:\"exampleModal\",tabindex:\"-1\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-dialog\",children:/*#__PURE__*/_jsx(\"div\",{class:\"modal-content\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"absolute bg-white rounded opacity-80 inset-0 z-0\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"w-full   max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg  bg-white \",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl py-2\",children:\"Schedule Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Schedule Date : \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.bookingDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone: \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.phone]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"City: \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.city]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Postal Code: \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.postCode]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Area: \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.area]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Name: \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.userName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Schedule Id: \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule._id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Schedule Status: \",currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.status]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"\",children:[(currentSchedule===null||currentSchedule===void 0?void 0:currentSchedule.status)===\"pending\"?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"flex justify-center py-4\",children:[/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({class:\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\",placeholder:\"Status\"},register(\"status\")),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accept\",children:\"Accept\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Reject\",children:\"Reject\"})]})),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",class:\"text-white font-bold py-1 px-3 ml-2 rounded text-xs bg-green-500 hover:bg-green-dark\"})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Status Submitted\"}),/*#__PURE__*/_jsx(\"div\",{class:\" text-center md:block\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-bs-dismiss\":\"modal\",className:\"mb-2 md:mb-0 service-btn px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-red-500\",children:\"Back\"})})]})]})]})})})})]});};export default Schedule;","map":{"version":3,"sources":["/Users/macbookair/Desktop/Anis/Sheba Offer/src/DashBoard/ScholarHouse/Schedule/Schedule.js"],"names":["React","useEffect","useForm","Spin","useState","useAuth","Schedule","user","currentSchedule","setCurrentSchedule","scheduleList","setScheduleList","email","fetch","then","res","json","data","schedule","filter","scholarEmail","handleSearch","event","searchText","target","value","matchedDetails","details","userName","toLowerCase","includes","register","handleSubmit","reset","onSubmit","bookedDates","bookingDate","scholarId","scheduleId","_id","console","log","status","method","headers","body","JSON","stringify","catch","error","window","location","reload","map","userImage","userEmail","city","phone","postCode","area"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\n\nimport { Spin } from \"antd\";\nimport \"./Schedule.css\";\n\nimport { useState } from \"react\";\nimport useAuth from \"../../../hooks/useAuth\";\n\nconst Schedule = () => {\n  const { user } = useAuth();\n  const [currentSchedule, setCurrentSchedule] = useState();\n  const [scheduleList, setScheduleList] = useState();\n  //   console.log(\"scheduleCurrent\", currentSchedule);\n  let email = user?.email;\n  useEffect(() => {\n    fetch(\"https://yellow-sparkly-station.glitch.me/schedule\")\n      .then((res) => res.json())\n      .then((data) => {\n        // console.log(\"event data\", data[0].email);\n        const schedule = data.filter((data) => data?.scholarEmail === email);\n        setScheduleList(schedule);\n        // console.log(event);\n      });\n  }, []);\n\n  // searching method\n\n  const handleSearch = (event) => {\n    const searchText = event.target.value;\n\n    const matchedDetails = scheduleList.filter((details) =>\n      details.userName.toLowerCase().includes(searchText.toLowerCase())\n    );\n\n    setScheduleList(matchedDetails);\n  };\n  // send scheduleBooking date and  change schedule status\n  const { register, handleSubmit, reset } = useForm();\n  const onSubmit = (data) => {\n    data.bookedDates = currentSchedule?.bookingDate;\n    data.scholarId = currentSchedule?.scholarId;\n    data.scheduleId = currentSchedule?._id;\n\n    console.log(\"bookedDates\", data);\n    if (data?.status === \"Accept\") {\n      fetch(\"https://yellow-sparkly-station.glitch.me/schedule/bookingInfo\", {\n        method: \"PUT\",\n        headers: { \"content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      })\n        .then((res) => {\n          // console.log(res);\n          // alert(\"image uploaded done\");\n          // reset();\n\n          reset();\n\n          // window.location.reload();\n        })\n        .catch((error) => {\n          // console.log(error);\n        });\n\n      //   send status to database\n      fetch(\"https://yellow-sparkly-station.glitch.me/schedule/bookingStatus\", {\n        method: \"PUT\",\n        headers: { \"content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      })\n        .then((res) => {\n          // console.log(res);\n          // alert(\"image uploaded done\");\n          // reset();\n\n          reset();\n\n          window.location.reload();\n        })\n        .catch((error) => {\n          // console.log(error);\n        });\n    } else {\n      fetch(\"https://yellow-sparkly-station.glitch.me/schedule/bookingStatus\", {\n        method: \"PUT\",\n        headers: { \"content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      })\n        .then((res) => {\n          // console.log(res);\n          // alert(\"image uploaded done\");\n          // reset();\n\n          reset();\n\n          window.location.reload();\n        })\n        .catch((error) => {\n          // console.log(error);\n        });\n    }\n  };\n  return (\n    <div>\n      <div class=\"inline-block min-w-full  rounded-lg overflow-hidden\">\n        <div class=\" flex items-center justify-between pb-6\">\n          <div>\n            <h2 class=\"text-gray-600 font-semibold\">\n              Schedule Booking Details\n            </h2>\n            <span class=\"text-xs\">All Schedule List</span>\n          </div>\n          <div class=\"flex items-center justify-between\">\n            <div class=\"flex bg-gray-50 items-center p-2 rounded-md\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                class=\"h-5 w-5 text-gray-400\"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fill-rule=\"evenodd\"\n                  d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\n                  clip-rule=\"evenodd\"\n                />\n              </svg>\n              <input\n                onChange={handleSearch}\n                class=\"bg-gray-50 outline-none ml-1 block \"\n                type=\"text\"\n                name=\"\"\n                id=\"\"\n                placeholder=\"search...by user name\"\n              />\n            </div>\n          </div>\n        </div>\n        <table class=\"min-w-full leading-normal\">\n          <thead>\n            <tr>\n              <th class=\"pl-28 py-3 border-b-2 border-gray-200 bg-gray-100 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                User Name\n              </th>\n              <th class=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                User Email\n              </th>\n              <th class=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Apply From\n              </th>\n              <th class=\"px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Date\n              </th>\n\n              <th class=\" py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Status\n              </th>\n              <th class=\" py-3 border-b-2 border-gray-200 bg-gray-100 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                Details\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {scheduleList?.map((schedule) => (\n              <tr>\n                <td class=\"px-5  border-b border-gray-200 bg-white text-sm\">\n                  <div class=\"flex items-center\">\n                    <div class=\" w-10 h-10\">\n                      <img\n                        class=\"w-full h-full rounded-full\"\n                        src={\n                          schedule?.userImage ||\n                          \"https://i.ibb.co/PFkN0mF/user.png\"\n                        }\n                        alt=\"\"\n                      />\n                    </div>\n                    <div class=\"ml-3\">\n                      <p class=\"text-gray-900 whitespace-no-wrap pt-3 justify-center\">\n                        {schedule?.userName}\n                      </p>\n                    </div>\n                  </div>\n                </td>\n                <td class=\"pt-3 border-b border-gray-200 bg-white text-sm\">\n                  <p class=\"text-gray-900 whitespace-no-wrap\">\n                    {schedule?.userEmail}\n                  </p>\n                </td>\n                <td class=\"pt-3 border-b border-gray-200 bg-white text-sm\">\n                  <p class=\"text-gray-900 whitespace-no-wrap\">\n                    {schedule?.city}\n                  </p>\n                </td>\n                <td class=\"  border-b border-gray-200 bg-white text-sm\">\n                  <span class=\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\">\n                    <span\n                      aria-hidden\n                      class=\"absolute inset-0 bg-indigo-200 opacity-50 rounded-full\"\n                    ></span>\n                    <span class=\"relative\">{schedule?.bookingDate}</span>\n                  </span>\n                </td>\n\n                <td class=\"  border-b border-gray-200 bg-white text-sm\">\n                  <span class=\"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight\">\n                    <span\n                      aria-hidden\n                      className={`${\n                        schedule?.status === \"Accept\"\n                          ? \"absolute inset-0 bg-green-200 opacity-50 rounded-full\"\n                          : schedule?.status === \"Reject\"\n                          ? \"absolute inset-0 bg-red-200 opacity-50 rounded-full\"\n                          : \"absolute inset-0 bg-yellow-200 opacity-50 rounded-full\"\n                      }`}\n                    ></span>\n                    <span class=\"relative\">{schedule?.status}</span>\n                  </span>\n                </td>\n                <td className=\"border-b border-gray-200\">\n                  <button\n                    onClick={() => setCurrentSchedule(schedule)}\n                    type=\"button\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#exampleModal\"\n                    class=\"text-white font-bold py-1 px-3 ml-2 rounded text-xs bg-green-500 hover:bg-green-dark\"\n                  >\n                    Details\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* modal start */}\n      {/* modal */}\n      <div\n        class=\"modal fade mt-12\"\n        id=\"exampleModal\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\">\n          <div class=\"modal-content\">\n            <div>\n              <div class=\"absolute bg-white rounded opacity-80 inset-0 z-0\"></div>\n              <div class=\"w-full   max-w-lg p-5 relative mx-auto my-auto rounded-xl shadow-lg  bg-white \">\n                <h3 className=\"text-xl py-2\">Schedule Information</h3>\n\n                <div className=\"text-left\">\n                  <p>Schedule Date : {currentSchedule?.bookingDate}</p>\n\n                  <p>Phone: {currentSchedule?.phone}</p>\n                  <div className=\"flex gap-4\">\n                    <p>City: {currentSchedule?.city}</p>\n                    <p>Postal Code: {currentSchedule?.postCode}</p>\n                  </div>\n                  <p>Area: {currentSchedule?.area}</p>\n                  <p>Name: {currentSchedule?.userName}</p>\n                  <p>Schedule Id: {currentSchedule?._id}</p>\n                  <p>Schedule Status: {currentSchedule?.status}</p>\n                </div>\n                <div class=\"\">\n                  {currentSchedule?.status === \"pending\" ? (\n                    <form\n                      onSubmit={handleSubmit(onSubmit)}\n                      className=\"flex justify-center py-4\"\n                    >\n                      {/* <input\n                        class=\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\"\n                        placeholder=\"Status\"\n                      /> */}\n\n                      <select\n                        class=\"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600\"\n                        placeholder=\"Status\"\n                        {...register(\"status\")}\n                      >\n                        <option value=\"pending\">pending</option>\n                        <option value=\"Accept\">Accept</option>\n                        <option value=\"Reject\">Reject</option>\n                      </select>\n                      <input\n                        type=\"submit\"\n                        class=\"text-white font-bold py-1 px-3 ml-2 rounded text-xs bg-green-500 hover:bg-green-dark\"\n                      />\n                    </form>\n                  ) : (\n                    <p>Status Submitted</p>\n                  )}\n\n                  <div class=\" text-center md:block\">\n                    <button\n                      type=\"button\"\n                      data-bs-dismiss=\"modal\"\n                      className=\"mb-2 md:mb-0 service-btn px-5 py-2 text-sm shadow-sm font-medium tracking-wider border text-white rounded-full hover:shadow-lg hover:bg-red-500\"\n                    >\n                      Back\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* Modal end */}\n    </div>\n  );\n};\n\nexport default Schedule;\n"]},"metadata":{},"sourceType":"module"}