{"ast":null,"code":"import _slicedToArray from\"/Users/macbookair/Desktop/Anis/Sheba Offer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import{NewAppContext}from\"../../App\";import Card from\"../../components/Card/Card\";import Card2 from\"../../components/Card2/Card2\";import Loader from\"../../components/Loader/Loader\";import useAuth from\"../../hooks/useAuth\";import\"./DashboardHome.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DashboardHome=function DashboardHome(){var _useAuth=useAuth(),userInfo=_useAuth.userInfo;var _useContext=useContext(NewAppContext),depositInfo=_useContext.depositInfo,setDepositInfo=_useContext.setDepositInfo;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),depositInfo2=_useState2[0],setDepositInfo2=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dmfBalance=_useState4[0],setDmfBalance=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];useEffect(function(){/* https://yellow-sparkly-station.glitch.me/ */try{setLoading(true);fetch(\"https://yellow-sparkly-station.glitch.me/deposit\").then(function(res){return res.json();}).then(function(data){setLoading(false);setDmfBalance(data);// console.log(\"event data\", data[0].email);\nif((userInfo===null||userInfo===void 0?void 0:userInfo.payRole)===\"finance\"){setDepositInfo(data);setDepositInfo2(data);}else{var filteredData=data===null||data===void 0?void 0:data.filter(function(d){return(d===null||d===void 0?void 0:d.email)===(userInfo===null||userInfo===void 0?void 0:userInfo.email);});setDepositInfo(filteredData);setDepositInfo2(filteredData);}});}catch(err){setLoading(false);toast.error(err);}},[]);// calculate deposit amount\nvar depositAmount=[];var dmfDepositAmount=[];depositInfo2===null||depositInfo2===void 0?void 0:depositInfo2.map(function(data){if((data===null||data===void 0?void 0:data.status)===\"Accepted\"){depositAmount===null||depositAmount===void 0?void 0:depositAmount.push(data===null||data===void 0?void 0:data.depositAmount);}});dmfBalance===null||dmfBalance===void 0?void 0:dmfBalance.map(function(data){if((data===null||data===void 0?void 0:data.status)===\"Accepted\"){dmfDepositAmount===null||dmfDepositAmount===void 0?void 0:dmfDepositAmount.push(data===null||data===void 0?void 0:data.depositAmount);}});var totalDeposit=depositAmount.length>0&&(depositAmount===null||depositAmount===void 0?void 0:depositAmount.reduce(function(prev,curr){return parseFloat(prev)+parseFloat(curr);}));var totalDmfDeposit=dmfDepositAmount.length>0&&(dmfDepositAmount===null||dmfDepositAmount===void 0?void 0:dmfDepositAmount.reduce(function(prev,curr){return parseFloat(prev)+parseFloat(curr);}));console.log(\"totalDmfDeposit\",totalDmfDeposit);return/*#__PURE__*/_jsx(\"div\",{className:\"\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 xl:grid-cols-3 lg:grid-cols-3 gap-4 mt-2\",children:[/*#__PURE__*/_jsx(Card,{title:\"My Current Balance\",amount:totalDeposit}),/*#__PURE__*/_jsx(Card,{title:\"Project Budget\"}),/*#__PURE__*/_jsx(Card,{title:\"DMF Total Cost\"}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsx(Card2,{amount:totalDmfDeposit})]})});};export default DashboardHome;","map":{"version":3,"sources":["/Users/macbookair/Desktop/Anis/Sheba Offer/src/DashBoard/DasboardHome/DashboardHome.js"],"names":["React","useContext","useEffect","useState","toast","NewAppContext","Card","Card2","Loader","useAuth","DashboardHome","userInfo","depositInfo","setDepositInfo","depositInfo2","setDepositInfo2","dmfBalance","setDmfBalance","loading","setLoading","fetch","then","res","json","data","payRole","filteredData","filter","d","email","err","error","depositAmount","dmfDepositAmount","map","status","push","totalDeposit","length","reduce","prev","curr","parseFloat","totalDmfDeposit","console","log"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { NewAppContext } from \"../../App\";\nimport Card from \"../../components/Card/Card\";\nimport Card2 from \"../../components/Card2/Card2\";\nimport Loader from \"../../components/Loader/Loader\";\nimport useAuth from \"../../hooks/useAuth\";\nimport \"./DashboardHome.css\";\n\nconst DashboardHome = () => {\n  const { userInfo } = useAuth();\n  const { depositInfo, setDepositInfo } = useContext(NewAppContext);\n  const [depositInfo2, setDepositInfo2] = useState([]);\n  const [dmfBalance, setDmfBalance] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    /* https://yellow-sparkly-station.glitch.me/ */\n    try {\n      setLoading(true);\n      fetch(`https://yellow-sparkly-station.glitch.me/deposit`)\n        .then((res) => res.json())\n        .then((data) => {\n          setLoading(false);\n          setDmfBalance(data);\n          // console.log(\"event data\", data[0].email);\n          if (userInfo?.payRole === \"finance\") {\n            setDepositInfo(data);\n            setDepositInfo2(data);\n          } else {\n            const filteredData = data?.filter(\n              (d) => d?.email === userInfo?.email\n            );\n            setDepositInfo(filteredData);\n            setDepositInfo2(filteredData);\n          }\n        });\n    } catch (err) {\n      setLoading(false);\n      toast.error(err);\n    }\n  }, []);\n  // calculate deposit amount\n\n  const depositAmount = [];\n  const dmfDepositAmount = [];\n\n  depositInfo2?.map((data) => {\n    if (data?.status === \"Accepted\") {\n      depositAmount?.push(data?.depositAmount);\n    }\n  });\n  dmfBalance?.map((data) => {\n    if (data?.status === \"Accepted\") {\n      dmfDepositAmount?.push(data?.depositAmount);\n    }\n  });\n\n  const totalDeposit =\n    depositAmount.length > 0 &&\n    depositAmount?.reduce((prev, curr) => parseFloat(prev) + parseFloat(curr));\n  const totalDmfDeposit =\n    dmfDepositAmount.length > 0 &&\n    dmfDepositAmount?.reduce(\n      (prev, curr) => parseFloat(prev) + parseFloat(curr)\n    );\n  console.log(\"totalDmfDeposit\", totalDmfDeposit);\n\n  return (\n    <div className=\"\">\n      {loading ? (\n        <Loader />\n      ) : (\n        <div>\n          <div className=\"grid grid-cols-1 xl:grid-cols-3 lg:grid-cols-3 gap-4 mt-2\">\n            <Card title={\"My Current Balance\"} amount={totalDeposit} />\n            <Card title={\"Project Budget\"} />\n            <Card title={\"DMF Total Cost\"} />\n\n            <div></div>\n          </div>\n          <Card2 amount={totalDmfDeposit} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DashboardHome;\n"]},"metadata":{},"sourceType":"module"}